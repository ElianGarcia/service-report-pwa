"use strict";(self.webpackChunkservice_report_pwa=self.webpackChunkservice_report_pwa||[]).push([[483],{4483:(q,_,a)=>{a.r(_),a.d(_,{AuthModule:()=>R});var m=a(6895),u=a(3060),r=a(4006),t=a(4650),p=a(678),d=a(4961),f=a(14),g=a(7392),l=a(9549),h=a(4144),v=a(4859);function Z(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function b(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function C(e,s){1&e&&(t.TgZ(0,"ion-chip",17),t._uU(1,"Incorrect username or password."),t.qZA())}const k=function(){return["/auth/forgot-password"]},T=function(){return["/auth/register"]};let w=(()=>{class e{constructor(o,n,i,c){this.fb=o,this.modal=n,this.userService=i,this.router=c,this.invalidLogin=!1}ngOnInit(){this.mainForm=this.fb.group({username:["eligarcia",[r.kI.required]],password:["123456",[r.kI.required]]}),this.userService.isUserAuthenticated()&&this.router.navigateByUrl("")}login(){this.invalidLogin=!1,this.mainForm.valid?this.userService.login(this.mainForm.value).subscribe(o=>{console.log(o);const i=o.user;localStorage.setItem("jwt",o.token),localStorage.setItem("user",JSON.stringify(i)),this.invalidLogin=!1,this.router.navigate([""])},o=>{console.log(o),(o.status=401)&&(this.invalidLogin=!0)}):this.modal.showMessage("Please fill all the fields!")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(p.Z),t.Y36(d.f),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-login"]],decls:29,vars:11,consts:[[3,"title"],[1,"container","col-md-8","pb-5","mt-5"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],[1,"col-md-8",3,"formGroup"],[1,"col-12","mt-3"],["matInput","","type","text","formControlName","username"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"col-12","mt-2"],["matInput","","type","password","formControlName","password"],["color","danger","class","mb-2",4,"ngIf"],[1,"row","justify-content-end","m-3"],["type","submit","value","Login",1,"col-4","btn","d-block","btn-dark",3,"click"],[1,"row","justify-content-around"],["routerLinkActive","router-link-active","href","javascript:void(0)",1,"text-start","col-5",3,"routerLink"],["routerLinkActive","router-link-active","href","javascript:void(0)",1,"text-end","col-5",3,"routerLink"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["color","danger",1,"mb-2"]],template:function(o,n){1&o&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),t._uU(6,"Login"),t.qZA(),t.TgZ(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Username"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,Z,3,0,"button",7),t.TgZ(12,"mat-error"),t._uU(13),t.qZA()(),t.TgZ(14,"mat-form-field",8)(15,"mat-label"),t._uU(16,"Password"),t.qZA(),t._UZ(17,"input",9),t.YNc(18,b,3,0,"button",7),t.TgZ(19,"mat-error"),t._uU(20),t.qZA()(),t.YNc(21,C,2,0,"ion-chip",10),t.TgZ(22,"div",11)(23,"input",12),t.NdJ("click",function(){return n.login()}),t.qZA()(),t.TgZ(24,"span",13)(25,"a",14),t._uU(26,"Forgot Password?"),t.qZA(),t.TgZ(27,"a",15),t._uU(28,"New User?"),t.qZA()()()()()()),2&o&&(t.Q6J("title","Login"),t.xp6(4),t.Q6J("formGroup",n.mainForm),t.xp6(7),t.Q6J("ngIf",n.mainForm.get("username").value),t.xp6(2),t.hij(" ",n.mainForm.get("username").errors," "),t.xp6(5),t.Q6J("ngIf",n.mainForm.get("password").value),t.xp6(2),t.hij(" ",n.mainForm.get("password").errors," "),t.xp6(1),t.Q6J("ngIf",n.invalidLogin),t.xp6(4),t.Q6J("routerLink",t.DdM(9,k)),t.xp6(2),t.Q6J("routerLink",t.DdM(10,T)))},dependencies:[m.O5,u.yS,u.Od,f.G,g.Hw,l.TO,l.KE,l.hX,l.R9,h.Nt,v.lW,r.Fj,r.JJ,r.JL,r.sg,r.u]}),e})();function F(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}const A=function(){return["/auth/login"]};let y=(()=>{class e{constructor(o,n,i,c){this.fb=o,this.modal=n,this.userService=i,this.router=c}ngOnInit(){this.mainForm=this.fb.group({mail:["",[r.kI.required,r.kI.email]]})}sendMail(){this.mainForm.valid?this.userService.sendRecoveryMail(this.mainForm.value).subscribe(o=>{console.log(o),this.modal.showMessage("Email sent successfully!"),this.router.navigate(["/login"])},o=>{console.log(o),this.modal.showMessage("Error sending email!")}):this.modal.showMessage("Please fill all the fields!")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(p.Z),t.Y36(d.f),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-password-forgot"]],decls:20,vars:6,consts:[[3,"title"],[1,"container","col-md-8","pb-5","mt-5"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],[1,"col-md-8",3,"formGroup"],[1,"col-12","mt-3"],["matInput","","type","text","formControlName","mail"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"row","justify-content-around","m-3"],["routerLinkActive","router-link-active",1,"col-5","btn","btn-outline-dark",3,"routerLink"],["type","submit","value","Send Code",1,"col-5","btn","d-block","btn-dark",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){1&o&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),t._uU(6,"Password Recovery"),t.qZA(),t.TgZ(7,"span"),t._uU(8," Please enter your email address. We will send you a mail to help you reset your password. "),t.qZA(),t.TgZ(9,"mat-form-field",5)(10,"mat-label"),t._uU(11,"Email"),t.qZA(),t._UZ(12,"input",6),t.YNc(13,F,3,0,"button",7),t.TgZ(14,"mat-error"),t._uU(15),t.qZA()(),t.TgZ(16,"div",8)(17,"button",9),t._uU(18,"Back to Login"),t.qZA(),t.TgZ(19,"input",10),t.NdJ("click",function(){return n.sendMail()}),t.qZA()()()()()()),2&o&&(t.Q6J("title","Password Recovery"),t.xp6(4),t.Q6J("formGroup",n.mainForm),t.xp6(9),t.Q6J("ngIf",n.mainForm.get("mail").value),t.xp6(2),t.hij(" ",n.mainForm.get("mail").errors," "),t.xp6(2),t.Q6J("routerLink",t.DdM(5,A)))},dependencies:[m.O5,u.rH,u.Od,f.G,g.Hw,l.TO,l.KE,l.hX,l.R9,h.Nt,v.lW,r.Fj,r.JJ,r.JL,r.sg,r.u]}),e})();function U(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function L(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){t.CHM(o);const i=t.oxw();return t.KtG(i.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}const J=function(){return["/auth/login"]},x=[{path:"",component:w},{path:"login",component:w},{path:"register",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-register"]],decls:2,vars:0,template:function(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"register works!"),t.qZA())}}),e})()},{path:"forgot-password",component:y},{path:"reset-password",component:(()=>{class e{constructor(o,n,i,c){this.fb=o,this.modal=n,this.userService=i,this.router=c,this.invalidLogin=!1}ngOnInit(){this.mainForm=this.fb.group({password:["",[r.kI.required]],passwordConfirm:["",[r.kI.required]]}),this.userService.isUserAuthenticated()&&this.router.navigateByUrl("")}reset(){this.invalidLogin=!1,this.mainForm.valid?this.userService.login(this.mainForm.value).subscribe(o=>{console.log(o);const i=o.user;localStorage.setItem("jwt",o.token),localStorage.setItem("user",JSON.stringify(i)),this.invalidLogin=!1,this.router.navigate([""])},o=>{console.log(o),(o.status=401)&&(this.invalidLogin=!0)}):this.modal.showMessage("Please fill all the fields!")}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(p.Z),t.Y36(d.f),t.Y36(u.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-password-reset"]],decls:27,vars:8,consts:[[3,"title"],[1,"container","col-md-8","pb-5","mt-5"],[1,"row"],[1,"col-12","d-flex","justify-content-center"],[1,"col-md-8",3,"formGroup"],[1,"col-12","mt-3"],["matInput","","type","password","formControlName","password"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","type","password","formControlName","passwordConfirm"],[1,"row","justify-content-around","m-3"],["routerLinkActive","router-link-active",1,"col-5","btn","btn-outline-dark",3,"routerLink"],["type","submit","value","Set password",1,"col-5","btn","d-block","btn-dark",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"]],template:function(o,n){1&o&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),t._uU(6,"Password Reset"),t.qZA(),t.TgZ(7,"span"),t._uU(8," Please enter your new password. Please try to make it as strong as possible as it will be used to keep your data safe. "),t.qZA(),t.TgZ(9,"mat-form-field",5)(10,"mat-label"),t._uU(11,"Password"),t.qZA(),t._UZ(12,"input",6),t.YNc(13,U,3,0,"button",7),t.TgZ(14,"mat-error"),t._uU(15),t.qZA()(),t.TgZ(16,"mat-form-field",5)(17,"mat-label"),t._uU(18,"Confirm the password"),t.qZA(),t._UZ(19,"input",8),t.YNc(20,L,3,0,"button",7),t.TgZ(21,"mat-error"),t._uU(22),t.qZA()(),t.TgZ(23,"div",9)(24,"button",10),t._uU(25,"Back to Login"),t.qZA(),t.TgZ(26,"input",11),t.NdJ("click",function(){return n.reset()}),t.qZA()()()()()()),2&o&&(t.Q6J("title","Password Reset"),t.xp6(4),t.Q6J("formGroup",n.mainForm),t.xp6(9),t.Q6J("ngIf",n.mainForm.get("password").value),t.xp6(2),t.hij(" ",n.mainForm.get("password").errors," "),t.xp6(5),t.Q6J("ngIf",n.mainForm.get("passwordConfirm").value),t.xp6(2),t.hij(" ",n.mainForm.get("passwordConfirm").errors," "),t.xp6(2),t.Q6J("routerLink",t.DdM(7,J)))},dependencies:[m.O5,u.rH,u.Od,f.G,g.Hw,l.TO,l.KE,l.hX,l.R9,h.Nt,v.lW,r.Fj,r.JJ,r.JL,r.sg,r.u]}),e})()}];let I=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(x),u.Bz]}),e})();var P=a(1299);let R=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[m.ez,I,P.q]}),e})()}}]);