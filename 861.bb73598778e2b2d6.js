"use strict";(self.webpackChunkservice_report_pwa=self.webpackChunkservice_report_pwa||[]).push([[861],{6861:(nt,p,i)=>{i.r(p),i.d(p,{StudentsModule:()=>V});var c=i(6895),m=i(3060),s=i(4006),t=i(4650),h=i(1135),u=i(925),f=i(529),v=i(4961);let d=(()=>{class n{constructor(e,o){this.httpClient=e,this.userService=o,this._studentList=new h.X([])}get userId(){return 2}getStudents(){return this.httpClient.get(u.Cq.GETSTUDENTS+this.userId).subscribe(e=>{console.log(e),this._studentList.next(e)}),this._studentList.asObservable()}getStudent(e){return this.httpClient.get(u.Cq.GETSTUDENT+e+"/2")}save(e){return this.httpClient.post(u.Cq.SAVESTUDENT,e)}visit(e){return this.httpClient.post(u.Cq.VISITSTUDENT,e)}delete(e){return this.httpClient.delete(u.Cq.DELETESTUDENT+e)}update(e){return this.httpClient.put(u.Cq.UPDATESTUDENT,e)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN),t.LFG(v.f))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var g=i(678);let T=(()=>{class n{constructor(e){this.httpClient=e,this._placements=new h.X([])}getPlacements(){return this.httpClient.get(u.Cq.GETPLACEMENTS).subscribe(e=>{this._placements.next(e)},e=>{}),this._placements.asObservable()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(f.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=i(14),b=i(7392),l=i(9549),C=i(4144),_=i(4859),F=i(455),x=i(4385),A=i(3238);function U(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function I(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getError("name")," ")}}function y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function E(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getError("phone")," ")}}function q(n,r){if(1&n&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.placementId),t.xp6(1),t.Oqu(e.name)}}function w(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getError("placementId")," ")}}function J(n,r){if(1&n&&(t.TgZ(0,"mat-option",25),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function N(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getError("dayToVisit")," ")}}function Y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function M(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getError("address")," ")}}function k(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",24),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.value="")}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function Q(n,r){if(1&n&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" ",e.getError("observations")," ")}}let Z=(()=>{class n{constructor(e,o,a,$,H,K,X){this.studentsService=e,this.formBuilder=o,this.modalService=a,this.placementsService=$,this.router=H,this.route=K,this.userService=X,this.isSubmitted=!1,this.placements=[],this.days=[{id:1,name:"Monday"},{id:2,name:"Tuesday"},{id:3,name:"Wednesday"},{id:4,name:"Thursday"},{id:5,name:"Friday"},{id:6,name:"Saturday"},{id:7,name:"Sunday"}],this.route.params.subscribe(R=>{let W=R.id;this.studentsService.getStudents().subscribe(tt=>{this.student=tt.find(et=>et.studentId==W),this.student&&this.mainForm.patchValue(this.student)})})}ngOnInit(){this.mainForm=this.formBuilder.group({studentId:["",s.kI.required],name:["",s.kI.required],phone:["",[s.kI.required,s.kI.minLength(10)]],placementId:["",s.kI.required],address:["",s.kI.required],active:[!0,s.kI.required],dayToVisit:["",s.kI.required],observations:[""],userId:[0,s.kI.required]}),this.mainForm.patchValue({userId:this.userService.getUser().userId}),this.placementsService.getPlacements().subscribe(e=>{this.placements=e})}getError(e){if(null!=this.mainForm.get(e)){if(this.mainForm.get(e).hasError("required"))return`El campo ${e} es obligatorio.`;if(this.mainForm.get(e).hasError("email"))return`El campo ${e} debe ser un email v\xe1lido.`;if(this.mainForm.get(e).hasError("minlength"))return`El campo ${e} debe tener como m\xednimo 8 caracteres.`;if(this.mainForm.get(e).hasError("minlength"))return`El campo ${e} debe tener como m\xednimo 11 caracteres.`}return""}get errorControl(){return this.mainForm.controls}submitForm(){this.isSubmitted=!0,this.mainForm.valid?this.student?this.studentsService.update(this.mainForm.value).subscribe(e=>{e>0&&(this.modalService.showMessage("Student updated successfully"),this.router.navigate(["/students"]))},e=>{this.modalService.showMessage("Error updating student")}):this.studentsService.save(this.mainForm.value).subscribe(e=>{e>0&&this.modalService.showMessage("Student saved!")},e=>{this.modalService.showMessage("An error occured while saving the student!")},()=>{this.router.navigate(["/students"])}):this.modalService.showMessage("Please fill all the required fields!")}deleteStudent(e){e?this.modalService.showConfirmMessage("Are you sure you want to delete this student?")&&this.studentsService.delete(e).subscribe(o=>{this.modalService.showMessage("Student deleted!")}):this.modalService.showMessage("An error occured while deleting the student!")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d),t.Y36(s.qu),t.Y36(g.Z),t.Y36(T),t.Y36(m.F0),t.Y36(m.gz),t.Y36(v.f))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-form"]],decls:57,vars:14,consts:[[3,"title"],[1,"container","col-md-8"],[1,"row"],[1,"col-12"],[3,"formGroup"],[1,"col-xl-6","col-md-12","col-sm-12"],["matInput","","type","text","formControlName","name"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[4,"ngIf"],[1,"col-xl-6","col-md-12"],["matInput","","type","text","formControlName","phone"],["appearance","fill",1,"col-xl-6","col-md-12"],["formControlName","placementId"],[3,"value",4,"ngFor","ngForOf"],["formControlName","dayToVisit"],[1,"col-md-10"],["matInput","","type","text","formControlName","address"],["formControlName","active",1,"col-md-2"],[1,"col-md-12"],["matInput","","type","text","formControlName","observations"],[1,"row","mt-2","d-flex","justify-content-end"],[1,"col-2"],["href","javascript:void(0)",1,"btn","d-block","btn-outline-dark"],["type","submit",1,"btn","d-block","btn-dark",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"]],template:function(e,o){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4)(5,"div",2)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Nombre"),t.qZA(),t._UZ(9,"input",6),t.YNc(10,U,3,0,"button",7),t.YNc(11,I,2,1,"mat-error",8),t.qZA(),t.TgZ(12,"mat-form-field",9)(13,"mat-label"),t._uU(14,"Tel\xe9fono"),t.qZA(),t._UZ(15,"input",10),t.YNc(16,y,3,0,"button",7),t.YNc(17,E,2,1,"mat-error",8),t.qZA()(),t.TgZ(18,"div",2)(19,"mat-form-field",11)(20,"mat-label"),t._uU(21,"Publicacion con la que estudia"),t.qZA(),t.TgZ(22,"mat-select",12)(23,"mat-option"),t._uU(24,"Clear"),t.qZA(),t.YNc(25,q,2,2,"mat-option",13),t.qZA(),t.YNc(26,w,2,1,"mat-error",8),t.qZA(),t.TgZ(27,"mat-form-field",11)(28,"mat-label"),t._uU(29,"Dia preferido para visitar"),t.qZA(),t.TgZ(30,"mat-select",14)(31,"mat-option"),t._uU(32,"Clear"),t.qZA(),t.YNc(33,J,2,2,"mat-option",13),t.qZA(),t.YNc(34,N,2,1,"mat-error",8),t.qZA()(),t.TgZ(35,"div",2)(36,"mat-form-field",15)(37,"mat-label"),t._uU(38,"Direccion"),t.qZA(),t._UZ(39,"input",16),t.YNc(40,Y,3,0,"button",7),t.YNc(41,M,2,1,"mat-error",8),t.qZA(),t.TgZ(42,"mat-slide-toggle",17),t._uU(43,"Activo"),t.qZA()(),t.TgZ(44,"mat-form-field",18)(45,"mat-label"),t._uU(46,"Observaciones"),t.qZA(),t._UZ(47,"input",19),t.YNc(48,k,3,0,"button",7),t.YNc(49,Q,2,1,"mat-error",8),t.qZA()(),t.TgZ(50,"div",20)(51,"div",21)(52,"a",22),t._uU(53," Cancelar"),t.qZA()(),t.TgZ(54,"div",21)(55,"a",23),t.NdJ("click",function(){return o.submitForm()}),t._uU(56," Guardar"),t.qZA()()()()()()),2&e&&(t.Q6J("title","Editar Estudiante"),t.xp6(4),t.Q6J("formGroup",o.mainForm),t.xp6(6),t.Q6J("ngIf",o.mainForm.get("name").value),t.xp6(1),t.Q6J("ngIf",o.isSubmitted),t.xp6(5),t.Q6J("ngIf",o.mainForm.get("phone").value),t.xp6(1),t.Q6J("ngIf",o.isSubmitted),t.xp6(8),t.Q6J("ngForOf",o.placements),t.xp6(1),t.Q6J("ngIf",o.isSubmitted),t.xp6(7),t.Q6J("ngForOf",o.days),t.xp6(1),t.Q6J("ngIf",o.isSubmitted),t.xp6(6),t.Q6J("ngIf",o.mainForm.get("address").value),t.xp6(1),t.Q6J("ngIf",o.isSubmitted),t.xp6(7),t.Q6J("ngIf",o.mainForm.get("observations").value),t.xp6(1),t.Q6J("ngIf",o.isSubmitted))},dependencies:[c.sg,c.O5,S.G,b.Hw,l.TO,l.KE,l.hX,l.R9,C.Nt,_.lW,F.Rr,x.gD,A.ey,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),n})();var O=i(4218);class j{}const L=function(n){return["form/",n]};let G=(()=>{class n{constructor(e,o){this.studentService=e,this.modalService=o,this.student=new j}ngOnInit(){}delete(){this.modalService.showConfirmMessage("Are you sure you want to delete this student?").subscribe(e=>{console.log(e),e&&this.studentService.delete(this.student.studentId).subscribe(o=>{console.log(o),this.modalService.showMessage("Student deleted successfully")})})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d),t.Y36(g.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-card"]],inputs:{student:"student"},decls:18,vars:6,consts:[[1,"card","mt-1"],[1,"card-body","row"],["xmlns","http://www.w3.org/2000/svg","width","128","height","128","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person-lines-fill","col-3","mt-3"],["d","M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"],[1,"col-9"],[1,"card-title"],[1,"card-text"],[1,"row","justify-content-end"],[1,"col","col-xl-4","col-md-4","col-sm-4"],["href","javascript:void(0)",1,"btn","d-block","btn-outline-dark",3,"click"],["href","#","routerLinkActive","router-link-active",1,"btn","d-block","btn-dark",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.O4$(),t.TgZ(2,"svg",2),t._UZ(3,"path",3),t.qZA(),t.kcU(),t.TgZ(4,"div",4)(5,"h2",5),t._uU(6),t.qZA(),t.TgZ(7,"p",6),t._uU(8),t._UZ(9,"br"),t._uU(10),t.qZA(),t.TgZ(11,"div",7)(12,"div",8)(13,"a",9),t.NdJ("click",function(){return o.delete()}),t._uU(14," Eliminar"),t.qZA()(),t.TgZ(15,"div",8)(16,"a",10),t._uU(17," Editar"),t.qZA()()()()()()),2&e&&(t.xp6(6),t.Oqu(o.student.name),t.xp6(2),t.hij("",o.student.placementName," "),t.xp6(2),t.hij(" ",o.student.observations,""),t.xp6(6),t.Q6J("routerLink",t.VKq(4,L,o.student.studentId)))},dependencies:[m.yS,m.Od]}),n})();function z(n,r){1&n&&t._UZ(0,"app-card",5),2&n&&t.Q6J("student",r.$implicit)}const D=[{path:"",component:(()=>{class n{constructor(e){this.studentService=e,this.studentList=new Array}ngOnInit(){this.studentService.getStudents().subscribe(e=>{this.studentList=e})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-students"]],decls:6,vars:2,consts:[[3,"title"],[1,"container","col-md-8","pb-5"],[1,"row"],[1,"col-12"],[3,"student",4,"ngFor","ngForOf"],[3,"student"]],template:function(e,o){1&e&&(t._UZ(0,"app-header",0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,z,1,1,"app-card",4),t.qZA()()(),t._UZ(5,"app-footer")),2&e&&(t.Q6J("title","Estudiantes"),t.xp6(4),t.Q6J("ngForOf",o.studentList))},dependencies:[c.sg,S.G,O.c,G]}),n})()},{path:"form",component:Z},{path:"form/:id",component:Z}];let P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(D),m.Bz]}),n})();var B=i(3354);let V=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,B.q,P]}),n})()}}]);